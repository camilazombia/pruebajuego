import * as React from "react";
import { motion, useReducedMotion } from "framer-motion";

type RocketSceneProps = {
  size?: number | string;
  className?: string;
  title?: string;
  /** 1 = normal, >1 más rápido, <1 más lento */
  speed?: number;
  /** Desactiva animaciones (override de prefers-reduced-motion) */
  disableAnimations?: boolean;
};

const RocketScene: React.FC<RocketSceneProps> = ({
  size = 300,
  className = "",
  title = "Rocket Scene",
  speed = 1,
  disableAnimations = false,
}) => {
  const prefersReduced = useReducedMotion();
  const animateOn = !(prefersReduced || disableAnimations);
  const dur = (d: number) => Math.max(0.1, d / Math.max(0.1, speed));

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 494 621"
      role="img"
      aria-label={title}
      className={className}
      style={{
        width: typeof size === "number" ? `${size}px` : size,
        height: "auto",
        display: "inline-block",
      }}
    >
      <title>{title}</title>
      <desc>Ilustración de cohete con elementos decorativos, nubes, estrellas y luces.</desc>

      {/* Capa principal */}
      <g style={{ isolation: "isolate" }}>
        <g id="layer-main">
          <path
            fill="#f55727"
            d="M96.29,315.33s.53,48.21,11.25,49.02c10.71.81,13.67-18.76,13.67-18.76,0,0,8.81,38.04,29.17,36.42,20.36-1.6,28.96-36.17,28.96-36.17,0,0,1.35,20.09,9.37,20.09s16.61-21.7,13.39-52.23l-105.8,1.61h0Z"
          />
          <path
            fill="#314ed5"
            d="M59.99,229.85s-29.47,15.96-38.32,46.92c-8.85,30.95.98,63.87,14.49,83.03,0,0,7.87,13.26,9.59-1.47,1.72-14.74,11.78-23.59,20.39-28.26,8.6-4.67,20.39-6.87,20.39-6.87l-26.53-93.35Z"
          />
          <path
            fill="#314ed5"
            d="M241.21,227.22s29.47,15.96,38.32,46.92c8.85,30.96-.98,63.87-14.49,83.03,0,0-7.87,13.26-9.59-1.48-1.72-14.73-11.79-23.58-20.39-28.26-8.6-4.67-20.39-6.87-20.39-6.87l26.53-93.35Z"
          />
          <path
            fill="#0a79ed"
            d="M85.01,323.19h128.39s67.72-138.06,0-256.78C187.46,22.88,158.44-.43,149.2,0c-9.24.43-32.4,15.88-65.3,67.5-63.97,107.94.22,256.56,1.1,255.68h.01Z"
          />
          <path
            fill="#f55727"
            d="M149.83,68.29c20.65,0,40.47-3.47,58.95-9.85C184.19,20.03,158.16-.4,149.52,0c-8.66.42-29.56,14-59.23,58.22,18.65,6.51,38.69,10.05,59.56,10.05h-.01Z"
          />

          {/* Sombra blend */}
          <g style={{ mixBlendMode: "color-burn", opacity: 0.2 }}>
            <path
              fill="gray"
              d="M213.4,66.41C187.46,22.88,158.44-.43,149.2,0c-3.38.16-8.65,2.34-15.57,7.58,13.23,10.08,31.74,30,48.9,58.81,67.72,118.72,0,256.78,0,256.78h30.86s67.72-138.06,0-256.78h.01Z"
            />
          </g>

          {/* Carita/ventanas */}
          <path d="M138.19,127.87c-5.25,0-9.52-4.27-9.52-9.52,0-.83.67-1.5,1.5-1.5s1.5.67,1.5,1.5c0,3.6,2.93,6.52,6.52,6.52s6.53-2.93,6.53-6.52c0-.83.67-1.5,1.5-1.5s1.5.67,1.5,1.5c0,5.25-4.27,9.52-9.53,9.52Z" />
          <path d="M163.05,127.87c-5.25,0-9.53-4.27-9.53-9.52,0-.83.67-1.5,1.5-1.5s1.5.67,1.5,1.5c0,3.6,2.93,6.52,6.53,6.52s6.53-2.93,6.53-6.52c0-.83.67-1.5,1.5-1.5s1.5.67,1.5,1.5c0,5.25-4.27,9.52-9.53,9.52Z" />
          <path d="M150.6,146.13c-17.22,0-32.42-10.98-37.82-27.32-.26-.79.17-1.63.95-1.9.79-.26,1.63.17,1.9.95,4.99,15.11,19.05,25.26,34.97,25.26s29.98-10.15,34.97-25.26c.26-.79,1.11-1.21,1.9-.95.79.26,1.21,1.11.95,1.9-5.4,16.34-20.6,27.32-37.82,27.32Z" />
          <path d="M185.64,164.73l56.44,44.87s1.68-5.5.95-14.58l-.95-9.56-56.44-20.74Z" />

          {/* Sombras externas */}
          <g style={{ mixBlendMode: "color-burn", opacity: 0.2 }}>
            <path
              fill="gray"
              d="M339.81,250.89l-66.69,61.67c1.91,3.4,6.74,4.58,9.99,1.58l65.36-60.43-8.66-2.82Z"
            />
            <path
              fill="gray"
              d="M462.86,94.92l-95.26,11.29-56.39-77.61c-3.3-4.54-10.43-2.98-11.52,2.53l-.38,1.88,54.54,75.08,95.26-11.29c5.58-.67,9.27,5.64,5.97,10.18l-56.39,77.61,40.18,87.11c.81,1.75.75,3.53.13,5.06l5.77,1.88c5.34,1.74,10.2-3.72,7.84-8.82l-40.18-87.11,56.39-77.61c3.3-4.54-.39-10.84-5.97-10.18h.01Z"
            />
          </g>

          <path
            fill="#f9a7e5"
            d="M310.36,28.59l56.39,77.61,95.26-11.29c5.58-.67,9.27,5.64,5.97,10.18l-56.39,77.61,40.18,87.11c2.36,5.1-2.5,10.55-7.84,8.82l-91.24-29.64-70.43,65.13c-4.12,3.82-10.82.88-10.82-4.73v-95.93l-83.71-46.86c-4.9-2.75-4.18-10.01,1.16-11.74l91.24-29.64,18.7-94.09c1.1-5.51,8.23-7.07,11.52-2.53h0Z"
          />
          <path d="M309.1,146.87c-4.52,0-8.54-3.22-9.37-7.81-.15-.81.39-1.6,1.21-1.74.82-.15,1.6.39,1.74,1.21.64,3.54,4.04,5.89,7.6,5.24,1.71-.31,3.2-1.28,4.19-2.71.99-1.44,1.36-3.17,1.05-4.88-.15-.81.39-1.6,1.21-1.75.81-.15,1.6.39,1.75,1.21.46,2.5-.09,5.03-1.53,7.12-1.45,2.1-3.62,3.51-6.13,3.96-.58.1-1.15.16-1.71.16Z" />
          <path d="M333.53,142.38c-4.52,0-8.54-3.22-9.37-7.81-.15-.81.39-1.6,1.21-1.74.82-.15,1.6.39,1.74,1.21.64,3.54,4.05,5.88,7.6,5.24,1.71-.31,3.2-1.28,4.19-2.71.99-1.44,1.36-3.17,1.05-4.88-.15-.81.39-1.6,1.21-1.75.81-.15,1.6.39,1.75,1.21.46,2.5-.09,5.03-1.53,7.12-1.45,2.1-3.62,3.51-6.13,3.96-.58.1-1.15.16-1.71.16Z" />
          <path d="M319.07,163.1c-14.36,0-27.8-7.76-34.88-20.69-.4-.73-.13-1.64.59-2.04.72-.4,1.64-.13,2.04.59,7.64,13.96,23.3,21.4,38.96,18.52,15.67-2.88,27.66-15.4,29.83-31.16.11-.82.87-1.4,1.69-1.28.82.11,1.39.87,1.28,1.69-2.35,17.05-15.32,30.59-32.26,33.7-2.42.45-4.85.66-7.25.66Z" />

          <path
            fill="#0dbb7c"
            d="M53.15,470.23h67.11v-64.04c0-7.19,5.83-13.01,13.01-13.01h68.14v-64.32c0-7.19,5.83-13.01,13.01-13.01h67.88c7.19,0,13.01,5.83,13.01,13.01v235.02c0,7.19-5.83,13.01-13.01,13.01H53.15c-7.19,0-13.01-5.83-13.01-13.01v-80.63c0-7.19,5.83-13.01,13.01-13.01Z"
          />
          <path d="M290.66,449.52l-57.22,127.38h52.4s8.43-1.99,8.88-10.7c.45-8.71-4.08-116.68-4.08-116.68h.02Z" />
          <path
            fill="#f55727"
            d="M317.79,340.25c-.35,1.39-.65,2.79-.92,4.18l-.1-.03-40.98,165.05c-11.89,47.88,17.28,96.32,65.16,108.2,47.88,11.89,96.32-17.28,108.2-65.16,6.35-25.54,1-51.25-12.64-71.46l10.05-40.49c21.52-11.49,38.26-31.71,44.61-57.25,11.89-47.88-17.28-96.32-65.16-108.2-47.88-11.89-96.32,17.28-108.2,65.16h-.02Z"
          />
          <path d="M351.12,481.77l-4.86,19.54c-.61,2.42-3.05,3.89-5.48,3.3l-19.54-4.86c-2.42-.61-4.87.87-5.48,3.3l-4.99,20.06c-.61,2.41.87,4.87,3.3,5.48l19.54,4.86c2.41.61,3.89,3.05,3.3,5.48l-4.86,19.53c-.61,2.42.87,4.87,3.3,5.48l20.06,4.99c2.41.61,4.87-.87,5.48-3.3l4.86-19.53c.61-2.42,3.05-3.89,5.48-3.3l19.54,4.86c2.41.61,4.87-.87,5.48-3.3l4.99-20.06c.61-2.41-.87-4.87-3.3-5.48l-19.54-4.86c-2.42-.61-3.89-3.05-3.3-5.48l4.86-19.54c.61-2.41-.87-4.87-3.3-5.48l-20.06-4.99c-2.41-.61-4.87.87-5.48,3.3Z" />

          {/* LUCES DEL CONTROL: círculos con parpadeo y pulso */}
          <motion.circle
            cx="360.96"
            cy="363.26"
            r="16.54"
            fill="#304ad3"
            initial={false}
            animate={
              animateOn
                ? { opacity: [0.6, 1, 0.7, 1], scale: [1, 1.08, 1] }
                : {}
            }
            transition={{ duration: dur(1.8), repeat: Infinity, ease: "easeInOut" }}
            style={{ filter: "drop-shadow(0 0 6px rgba(48,74,211,0.65))" }}
          />
          <motion.circle
            cx="426.71"
            cy="379.58"
            r="16.54"
            fill="#fc5f53"
            initial={false}
            animate={
              animateOn
                ? { opacity: [0.5, 1, 0.6, 1], scale: [1, 1.12, 1] }
                : {}
            }
            transition={{ duration: dur(1.6), repeat: Infinity, ease: "easeInOut", delay: 0.2 }}
            style={{ filter: "drop-shadow(0 0 6px rgba(252,95,83,0.65))" }}
          />
          <motion.circle
            cx="402.29"
            cy="338.62"
            r="16.54"
            fill="#0dbb7c"
            initial={false}
            animate={
              animateOn
                ? { opacity: [0.55, 1, 0.65, 1], scale: [1, 1.1, 1] }
                : {}
            }
            transition={{ duration: dur(1.7), repeat: Infinity, ease: "easeInOut", delay: 0.35 }}
            style={{ filter: "drop-shadow(0 0 6px rgba(13,187,124,0.65))" }}
          />
          <motion.circle
            cx="385.97"
            cy="404.37"
            r="16.54"
            fill="#fbd747"
            initial={false}
            animate={
              animateOn
                ? { opacity: [0.6, 1, 0.7, 1], scale: [1, 1.06, 1] }
                : {}
            }
            transition={{ duration: dur(1.9), repeat: Infinity, ease: "easeInOut", delay: 0.55 }}
            style={{ filter: "drop-shadow(0 0 6px rgba(251,215,71,0.65))" }}
          />
        </g>

        {/* NUBE: deriva + leve bobbing + fade sutil */}
        <motion.g
          id="cloud"
          initial={false}
          animate={
            animateOn
              ? { x: [0, 8, 0, -6, 0], y: [0, -2, 0, 1, 0], opacity: [0.9, 1, 0.95, 1, 0.9] }
              : {}
          }
          transition={{ duration: dur(10), repeat: Infinity, ease: "easeInOut" }}
        >
          <path
            fill="#fff"
            d="M60.89,150.65c-.88-11.6-10.56-20.75-22.38-20.75-12.41,0-22.47,10.06-22.47,22.47,0,.12.01.23.01.35-9.18,2.05-16.05,10.24-16.05,20.03,0,10.51,7.9,19.16,18.08,20.37v.07h.65c.59.06,1.2.09,1.82.09s1.21-.04,1.82-.09h34.73c.61.06,1.2.09,1.82.09,11.8,0,21.37-9.57,21.37-21.37,0-11.13-8.52-20.27-19.38-21.27h-.03Z"
          />
        </motion.g>

        {/* MINI STAR 1: parpadeo + giro lento */}
        <motion.g
          id="mini-star-1"
          style={{ transformOrigin: "296px 433px" }}
          initial={false}
          animate={
            animateOn
              ? { scale: [1, 1.08, 1], opacity: [0.8, 1, 0.85, 1, 0.8], rotate: [0, 8, 0, -6, 0] }
              : {}
          }
          transition={{ duration: dur(6), repeat: Infinity, ease: "easeInOut" }}
        >
          <path
            fill="#fff"
            d="M296.29,405.05l.48,1.27c4.02,10.89,12.58,19.49,23.47,23.53l1.23.46c.9.33.9,1.59,0,1.92l-1.23.46c-10.87,4.05-19.45,12.64-23.47,23.53l-.48,1.27c-.33.9-1.61.9-1.92,0l-.48-1.27c-4.02-10.89-12.58-19.49-23.47-23.53l-1.23-.46c-.9-.33-.9-1.59,0-1.92l1.23-.46c10.87-4.05,19.45-12.64,23.47-23.53l.48-1.27c.33-.9,1.61-.9,1.92,0Z"
          />
        </motion.g>

        {/* MINI STAR 2: centelleo + micro desplazamientos */}
        <motion.g
          id="mini-star-2"
          style={{ transformOrigin: "362px 100px" }}
          initial={false}
          animate={
            animateOn
              ? {
                  scale: [1, 0.92, 1.06, 1],
                  opacity: [1, 0.7, 1, 0.85, 1],
                  x: [0, 1.5, 0, -1, 0],
                  y: [0, -1, 0, 1, 0],
                }
              : {}
          }
          transition={{ duration: dur(5), repeat: Infinity, ease: "easeInOut" }}
        >
          <path
            fill="#fff"
            d="M361.92,85.39l4.19,11.39c.26.72.84,1.3,1.56,1.56l11.37,4.22c.9.33.9,1.59,0,1.92l-11.37,4.22c-.72.27-1.29.84-1.56,1.56l-4.19,11.39c-.33.9-1.61.9-1.92,0l-4.19-11.39c-.26-.72-.84-1.3-1.56-1.56l-11.36-4.22c-.9-.33-.9-1.59,0-1.92l11.36-4.22c.72-.27,1.29-.84,1.56-1.56l4.19-11.39c.33-.9,1.61-.9,1.92,0Z"
          />
        </motion.g>
      </g>
    </svg>
  );
};

export default RocketScene;
